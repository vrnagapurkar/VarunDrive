<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up - VarunDrive</title>
</head>
<body>
<h1>Sign Up</h1>
<form id="signupForm">
<input type="email" id="email" placeholder="Email" required/><br/>
<input type="text" id="preferredUsername" placeholder="Username" required/><br/>
<input type="text" id="name" placeholder="Name" required/><br/>
<input type="password" id="password" placeholder="Password" required/><br/>
<button type="submit">Sign Up</button>
</form>
<p>Already have an account? <a href="login.html">Login</a></p>


<script>
const API_BASE = "https://yn2y9x0yi5.execute-api.us-east-1.amazonaws.com/dev";

document.getElementById('signupForm').addEventListener('submit', async e => {
  e.preventDefault();
  const email = document.getElementById('email').value;
  const preferredUsername = document.getElementById('preferredUsername').value;
  const name = document.getElementById('name').value;
  const password = document.getElementById('password').value;

  try {
    const res = await fetch(`${API_BASE}/signup`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
          email: email,
          preferredUsername: preferredUsername,
          name: name,
          password: password
      })
    });

    const data = await res.json();
    alert(data.message || data.error);

  } catch(err) {
    console.error(err);
    alert("Failed to connect to backend.");
  }
});
</script>

</body>
</html>